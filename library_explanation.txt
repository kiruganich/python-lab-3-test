# Подробное пояснение выполненной лабораторной работы

## Вариант 1: «Библиотека»

### Цель работы
Реализовать систему управления библиотекой с использованием пользовательских коллекций и псевдослучайной модели симуляции.

### Структура проекта

#### 1. src/constants.py
- Содержит константы для симуляции (типы событий, параметры по умолчанию, формат логов, поддерживаемые жанры)
- Обеспечивает централизованное управление конфигурационными значениями

#### 2. src/book.py
- Класс `Book` с обязательными полями: title, author, year, genre, isbn
- Реализует методы `__repr__`, `__eq__`, `__hash__` для корректной работы с объектами книг

#### 3. src/book_collection.py
- Пользовательская списковая коллекция `BookCollection`
- Поддерживает магические методы: `__getitem__` (индексы и срезы), `__iter__`, `__len__`
- Реализует методы добавления/удаления элементов: `append`, `remove`, `extend`, `clear`
- Дополнительные методы поиска: `get_books_by_author`, `get_books_by_year`, `get_books_by_genre`

#### 4. src/index_dict.py
- Пользовательская словарная коллекция `IndexDict` для индексации книг
- Индексирует по ISBN, автору и году
- Поддерживает магические методы: `__getitem__`, `__setitem__`, `__iter__`, `__len__`
- Обеспечивает синхронизацию индексов при добавлении/удалении книг
- Включает логирование изменений в индексах

#### 5. src/library_base.py
- Абстрактный базовый класс `LibraryItem`
- Использует наследование с ABC (Abstract Base Class)
- Определяет общий интерфейс для элементов библиотеки

#### 6. src/library.py
- Производный класс `Library`, наследующийся от `LibraryItem`
- Расширяет поведение базового класса
- Содержит коллекцию книг и коллекцию индексов
- Реализует методы поиска книг с использованием пользовательских коллекций
- Включает магический метод `__call__` для поиска книг как вызываемого объекта

#### 7. src/simulation.py
- Функция `run_simulation` с параметрами steps и seed
- Реализует псевдослучайную симуляцию с 7 различными событиями:
  1. add_book - добавление новой книги
  2. remove_book - удаление случайной книги
  3. search_author - поиск по автору
  4. search_genre - поиск по жанру
  5. search_year - поиск по году
  6. update_index - обновление индекса
  7. get_missing_book - попытка получить книгу, которой нет
- Использует модуль random с возможностью задания seed
- Все события выводятся в консоль с логированием

#### 8. main.py
- Точка входа в приложение
- Обрабатывает аргументы командной строки (steps, seed)
- Запускает симуляцию с заданными параметрами

#### 9. tests/test.py
- Полное покрытие тестами всех компонентов системы
- Тесты для классов Book, BookCollection, IndexDict, Library
- Тесты для симуляции
- Использует pytest для выполнения тестов

#### 10. README.md
- Подробное описание проекта, структуры, установки и использования
- Примеры работы с приложением

### Технические особенности реализации

#### Пользовательские коллекции:
1. **BookCollection** (списковая):
   - Поддерживает `__getitem__` с индексами и срезами
   - Поддерживает `__iter__` для итерации
   - Поддерживает `__len__` для получения длины
   - Методы добавления/удаления элементов

2. **IndexDict** (словарная):
   - Поддерживает `__getitem__`, `__setitem__`, `__iter__`, `__len__`
   - Индексирует книги по ISBN, автору, году
   - Обновляет индексы при изменении коллекции

#### Наследование:
- `LibraryItem` (абстрактный базовый класс)
- `Library` (производный класс, расширяющий поведение)
- Использование ABC для определения абстрактных методов

#### Магические методы:
- `__add__`: не использовался, так как не применим к библиотечной тематике
- `__call__`: позволяет вызывать библиотеку как функцию для поиска
- `__repr__`: строковое представление объектов
- `__contains__`: не использовался напрямую, но обеспечивается через коллекции
- В коллекциях реализованы: `__getitem__`, `__iter__`, `__len__`

#### Логирование:
- Используется модуль logging
- Все важные события логируются
- Формат логов определен в константах

#### Тестирование:
- Полное покрытие pytest тестами
- Тестирование всех компонентов системы
- Проверка корректности работы пользовательских коллекций

### Соблюдение требований:
✅ Не менее двух пользовательских коллекций: BookCollection (списковая), IndexDict (словарная)
✅ Поддержка магических методов в обеих коллекциях
✅ Словарная коллекция связана с предметной моделью (индексация книг)
✅ Базовый класс LibraryItem и два производных (Library)
✅ Магические методы, отражающие предметную область (__call__ в Library)
✅ Функция симуляции с параметрами steps и seed
✅ Минимум 5 различных случайных событий в симуляции
✅ Все события выводятся в консоль
✅ Использование random с возможностью задания seed
✅ Логирование всех операций
✅ Покрытие тестами pytest
✅ Разделение функционала на логические модули в папке src